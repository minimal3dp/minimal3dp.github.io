<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Minimal 3DP â€“ Klipper</title><link>https://minimal3dp.com/tags/klipper/</link><description>Recent content in Klipper on Minimal 3DP</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Sat, 06 Apr 2024 00:00:00 +0000</lastBuildDate><atom:link href="https://minimal3dp.com/tags/klipper/index.xml" rel="self" type="application/rss+xml"/><item><title>Projects: Sidewinder X1 (SWX1) Klipper Config</title><link>https://minimal3dp.com/projects/3d-printers/sidewinder-x1/swx1-klipper-config/</link><pubDate>Sat, 06 Apr 2024 00:00:00 +0000</pubDate><guid>https://minimal3dp.com/projects/3d-printers/sidewinder-x1/swx1-klipper-config/</guid><description>
&lt;div class="pageinfo pageinfo-primary">
&lt;p>SWX1 with a BTT SKR 2&lt;/p>
&lt;/div>
&lt;p>&lt;a href="https://github.com/minimal3dp/swx1-skr2-klipper/tree/main">GitHub Backup&lt;/a>&lt;/p>
&lt;pre tabindex="0">&lt;code>[include shell_command.cfg]
[include fluidd.cfg]
[include mainsail.cfg]
# This file contains common pin mappings for the BigTreeTech SKR 2.
# To use this config, the firmware should be compiled for the
# STM32F407 with a &amp;#34;32KiB bootloader&amp;#34;.
# In newer versions of this board shipped in late 2021 the STM32F429
# is used, if this is the case compile for this with a &amp;#34;32KiB bootloader&amp;#34;
# You will need to check the chip on your board to identify which you have.
#
# The &amp;#34;make flash&amp;#34; command does not work on the SKR 2. Instead,
# after running &amp;#34;make&amp;#34;, copy the generated &amp;#34;out/klipper.bin&amp;#34; file to a
# file named &amp;#34;firmware.bin&amp;#34; on an SD card and then restart the SKR 2
# with that SD card.
# See docs/Config_Reference.md for a description of parameters.
# Note: The initial revision of this board has a flaw that can cause
# damage to itself and other boards. Be sure to verify the board is
# not impacted by this flaw before using it.
[stepper_x]
step_pin: PE2
dir_pin: !PE1
enable_pin: !PE3
microsteps: 16
rotation_distance: 40
endstop_pin: ^!PC1
position_endstop: 0
position_max: 300
homing_speed: 100
[tmc2209 stepper_x]
uart_pin: PE0
run_current: 0.800
diag_pin:
[stepper_y]
step_pin: PD5
dir_pin: !PD4
enable_pin: !PD6
microsteps: 16
rotation_distance: 40
endstop_pin: ^!PC3
position_endstop: 0
position_max: 300
homing_speed: 100
[tmc2209 stepper_y]
uart_pin: PD3
run_current: 0.800
diag_pin:
[stepper_z]
step_pin: PA15
dir_pin: PA8
enable_pin: !PD1
microsteps: 16
rotation_distance: 8
endstop_pin: probe:z_virtual_endstop
position_max: 400
homing_speed: 20
second_homing_speed: 1
[tmc2209 stepper_z]
uart_pin: PD0
run_current: 0.800
diag_pin:
[stepper_z1]
step_pin: PD11
dir_pin: PD10
enable_pin: !PD13
microsteps: 16
rotation_distance: 8
[tmc2209 stepper_z1]
uart_pin: PD12
run_current: 0.800
diag_pin:
[extruder]
step_pin: PD15
dir_pin: PD14
enable_pin: !PC7
microsteps: 16
rotation_distance: 33.500
nozzle_diameter: 0.400
filament_diameter: 1.750
heater_pin: PB3
sensor_type: EPCOS 100K B57560G104F
sensor_pin: PA2
#control: pid
#pid_Kp: 22.2
#pid_Ki: 1.08
#pid_Kd: 114
min_temp: 0
max_temp: 250
[tmc2209 extruder]
uart_pin: PC6
run_current: 0.600
diag_pin:
[heater_bed]
heater_pin: PD7
sensor_type: EPCOS 100K B57560G104F
sensor_pin: PA1
#control: pid
min_temp: 0
max_temp: 130
#pid_kp: 42.365
#pid_ki: 0.545
#pid_kd: 822.940
[fan]
pin: PB7
[heater_fan fan1]
pin: PB6
#[heater_fan fan2]
#pin: PB5
# Due to BTT implementing a Marlin-specific safety feature,
# &amp;#34;anti-reversal stepper protection&amp;#34;, this pin needs pulling
# high to pass power to stepper drivers and most FETs
[output_pin motor_power]
pin: PC13
value: 1
[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f429xx_200044001450304738323420-if00
[printer]
kinematics: cartesian
max_velocity: 250
max_accel: 3000
max_z_velocity: 50
max_z_accel: 400
square_corner_velocity: 5.0
[bltouch]
## If these change, adjust coords in [z_tilt], [safe_z_home]
sensor_pin: ^PE4
control_pin: PE5
x_offset: 29
y_offset: -34
z_offset: 10
samples: 3
samples_result:average
probe_with_touch_mode: true
stow_on_each_sample: false
[safe_z_home]
home_xy_position: 122,183
speed: 150
z_hop: 10 # Move up 10mm
z_hop_speed: 5
[bed_screws]
screw1: 55,55
screw1_name: front left
screw2: 255,55
screw2_name: front right
screw3: 255,255
screw3_name: back right
screw4: 55,255
screw4_name: back left
speed: 100.0
[screws_tilt_adjust]
screw1: 22,83
screw1_name: front left
screw2: 222,83
screw2_name: front right
screw3: 22,283
screw3_name: back left
screw4: 222,283
screw4_name: back right
speed: 100.0
screw_thread: CW-M5
[bed_mesh]
speed: 800
mesh_min: 30,30
mesh_max: 270,270
probe_count: 5,5
mesh_pps: 2,2
algorithm: bicubic
bicubic_tension: 0.2
move_check_distance: 3.0
split_delta_z: .010
fade_start: 1.0
fade_end: 5.0
########################################
# EXP1 / EXP2 (display) pins
########################################
[board_pins]
aliases:
# EXP1 header
EXP1_1=PC5, EXP1_3=PB1, EXP1_5=PE10, EXP1_7=PE12, EXP1_9=&amp;lt;GND&amp;gt;,
EXP1_2=PB0, EXP1_4=PE9, EXP1_6=PE11, EXP1_8=PE13, EXP1_10=&amp;lt;5V&amp;gt;,
# EXP2 header
EXP2_1=PA6, EXP2_3=PE7, EXP2_5=PB2, EXP2_7=PC4, EXP2_9=&amp;lt;GND&amp;gt;,
EXP2_2=PA5, EXP2_4=PA4, EXP2_6=PA7, EXP2_8=&amp;lt;RST&amp;gt;, EXP2_10=&amp;lt;NC&amp;gt;
# See the sample-lcd.cfg file for definitions of common LCD displays.
[gcode_macro update_git]
gcode:
RUN_SHELL_COMMAND CMD=update_git_script
[gcode_shell_command update_git_script]
command: bash /home/wilsonm/printer_1_data/klipper-backup/script.sh
timeout: 90.0
verbose: True
&lt;/code>&lt;/pre></description></item><item><title>Projects: Ender 3 S1 Plus (e3s1p) Klipper Config</title><link>https://minimal3dp.com/projects/3d-printers/ender-3-s1-plus/e3s1p-klipper-config/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://minimal3dp.com/projects/3d-printers/ender-3-s1-plus/e3s1p-klipper-config/</guid><description>
&lt;div class="pageinfo pageinfo-primary">
&lt;p>Ender 3 S1 Plus with the default Creality Board&lt;/p>
&lt;/div>
&lt;pre tabindex="0">&lt;code># !Ender-3 S1 Plus
# printer_size: 300x300x300
# version: 3.6
# This file contains pin mappings for the stock 2021 Creality Ender 3
# S1 &amp;amp; S1 Pro. To use this config, check the STM32 Chip on the
# Mainboard, during &amp;#34;make menuconfig&amp;#34; select accordingly either the
# STM32F103 with &amp;#34;28KiB bootloader&amp;#34; or the STM32F401 with
# &amp;#34;64KiB bootloader&amp;#34; and serial (on USART1 PA10/PA9) for both.
# For a direct serial connection, in &amp;#34;make menuconfig&amp;#34; select
# &amp;#34;Enable extra low-level configuration options&amp;#34; and Serial
# (on USART2 PA3/PA2), which is on the 10 pin IDC cable used
# Flash this firmware by copying &amp;#34;out/klipper.bin&amp;#34; to a SD card and
# turning on the printer with the card inserted. The filename
# must be changed to &amp;#34;firmware.bin&amp;#34;
# With STM32F401, you might need to put &amp;#34;firmware.bin&amp;#34; in a
# folder on the SD card called &amp;#34;STM32F4_UPDATE&amp;#34; in order to flash.
# See docs/Config_Reference.md for a description of parameters.
###fluidd set
[include cx_printer.cfg]
[display_status]
[pause_resume]
[gcode_macro PAUSE]
description: Pause the actual running print
rename_existing: PAUSE_BASE
# change this if you need more or less extrusion
variable_extrude: 1.0
gcode:
##### read E from pause macro #####
{% set E = printer[&amp;#34;gcode_macro PAUSE&amp;#34;].extrude|float %}
##### set park positon for x and y #####
# default is your max posion from your printer.cfg
{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
##### calculate save lift position #####
{% set max_z = printer.toolhead.axis_maximum.z|float %}
{% set act_z = printer.toolhead.position.z|float %}
{% if act_z &amp;lt; (max_z - 2.0) %}
{% set z_safe = 2.0 %}
{% else %}
{% set z_safe = max_z - act_z %}
{% endif %}
##### end of definitions #####
PAUSE_BASE
G91
{% if printer.extruder.can_extrude|lower == &amp;#39;true&amp;#39; %}
G1 E-{E} F2100
{% else %}
{action_respond_info(&amp;#34;Extruder not hot enough&amp;#34;)}
{% endif %}
{% if &amp;#34;xyz&amp;#34; in printer.toolhead.homed_axes %}
G1 Z{z_safe} F900
G90
G1 X{x_park} Y{y_park} F6000
{% else %}
{action_respond_info(&amp;#34;Printer not homed&amp;#34;)}
{% endif %}
[gcode_macro RESUME]
description: Resume the actual running print
rename_existing: RESUME_BASE
gcode:
##### read E from pause macro #####
{% set E = printer[&amp;#34;gcode_macro PAUSE&amp;#34;].extrude|float %}
#### get VELOCITY parameter if specified ####
{% if &amp;#39;VELOCITY&amp;#39; in params|upper %}
{% set get_params = (&amp;#39;VELOCITY=&amp;#39; + params.VELOCITY) %}
{%else %}
{% set get_params = &amp;#34;&amp;#34; %}
{% endif %}
##### end of definitions #####
{% if printer.extruder.can_extrude|lower == &amp;#39;true&amp;#39; %}
G91
G1 E{E} F2100
{% else %}
{action_respond_info(&amp;#34;Extruder not hot enough&amp;#34;)}
{% endif %}
RESUME_BASE {get_params}
[gcode_macro CANCEL_PRINT]
description: Cancel the actual running print
rename_existing: CANCEL_PRINT_BASE
gcode:
TURN_OFF_HEATERS
{% if &amp;#34;xyz&amp;#34; in printer.toolhead.homed_axes %}
G91
G1 Z4.5 F300
G90
{% else %}
{action_respond_info(&amp;#34;Printer not homed&amp;#34;)}
{% endif %}
G28 X Y
{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
G1 Y{y_park} F2000
M84
CANCEL_PRINT_BASE
[stepper_x]
step_pin: PC2
dir_pin: PB9
enable_pin: !PC3
rotation_distance: 40
microsteps: 16
endstop_pin: !PA5
position_min: -5
position_endstop: -5
position_max: 305
homing_speed: 80
[stepper_y]
step_pin: PB8
dir_pin: PB7
enable_pin: !PC3
rotation_distance: 40
microsteps: 16
endstop_pin: !PA6
position_min: -2
position_endstop: -2
position_max: 305
homing_speed: 80
[stepper_z]
step_pin: PB6
dir_pin: !PB5
enable_pin: !PC3
rotation_distance: 8
microsteps: 16
endstop_pin: probe:z_virtual_endstop #enable to use bltouch
#endstop_pin: !PA15 #disable to use bltouch
#position_endstop: -0.1
position_min: -10
position_max: 305
homing_speed: 4
second_homing_speed: 1
homing_retract_dist: 2.0
[extruder]
max_extrude_only_distance: 1000.0
step_pin: PB4
dir_pin: PB3
enable_pin: !PC3
rotation_distance: 7.74
microsteps: 16
nozzle_diameter: 0.400
filament_diameter: 1.750
heater_pin: PA1
sensor_type: EPCOS 100K B57560G104F
sensor_pin: PC5
#control: pid
# tuned for stock hardware with 200 degree Celsius target
#pid_Kp: 23.904
#pid_Ki: 1.476
#pid_Kd: 96.810
min_temp: 0
max_temp: 265
[idle_timeout]
timeout: 172800
[heater_bed]
heater_pin: PA7
sensor_type: EPCOS 100K B57560G104F
sensor_pin: PC4
#control: pid
# tuned for stock hardware with 50 degree Celsius target
#pid_Kp: 74.000
#pid_Ki: 1.965
#pid_Kd: 696.525
min_temp: 0
max_temp: 130
[verify_heater extruder]
check_gain_time: 200
hysteresis: 5
[fan]
pin: PA0
kick_start_time: 0.5
#set heater fan runnig with temperature over 60;
[heater_fan my_nozzle_fan]
pin: PC0
max_power: 0.8
shutdown_speed : 0
heater:extruder
heater_temp : 60
fan_speed : 1.0
[mcu]
serial: /dev/serial/by-id/usb_serial_1
restart_method: command
# [mcu rpi]
# serial: /tmp/klipper_host_mcu
# [adxl345]
# cs_pin: rpi:None
# spi_speed: 2000000
# spi_bus: spidev2.0
# [resonance_tester]
# accel_chip: adxl345
# accel_per_hz: 70
# probe_points:
# 150,150,10
[input_shaper]
shaper_type_x = mzv
shaper_freq_x = 59.2
shaper_type_y = mzv
shaper_freq_y = 30.0
[filament_switch_sensor filament_sensor]
pause_on_runout: true
switch_pin: ^!PC15
[bltouch]
sensor_pin: ^PC14 #signal check port ^stand for pull up
control_pin: PC13 #singal control prot
x_offset: -30.0
y_offset: -40.0
#z_offset: 0 #z off_set configuration
stow_on_each_sample = false #high speed for bltoch,
speed: 3.0
samples: 2
samples_result: median
sample_retract_dist: 6.0
samples_tolerance: 0.01
samples_tolerance_retries: 3
[safe_z_home]
home_xy_position:185,195
speed: 200
z_hop: 10
z_hop_speed: 10
[bed_mesh]
speed: 150
mesh_min: 25,30 #need to handle head distance with bl_touch
mesh_max: 273,250 #max probe range
probe_count: 5,5
fade_start: 1
fade_end: 10
algorithm: bicubic
[bed_screws]
screw1: 25, 33
screw2: 262, 33
screw3: 262, 272
screw4: 25, 272
[gcode_arcs]
#resolution: 1.0
[printer]
kinematics: cartesian
max_velocity: 300
max_accel: 4000
max_z_velocity: 10
max_z_accel: 1000
square_corner_velocity: 5.0
[exclude_object]
[include timelapse.cfg]
[include cx_gmcro.cfg]
&lt;/code>&lt;/pre></description></item></channel></rss>